{"version":3,"file":"14.js","sources":["webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/models/card.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/models/control-card.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/common/base-feed.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/card-manager.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/card-manager-factory.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/log-card-dismissal.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/display/card-display.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Core/remove-subscription.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/common/feed-display.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/log-card-impressions.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/log-card-click.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/models/classic-card.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/models/captioned-image.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/models/image-only.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Card/util/card-factory.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Feed/feed-provider.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Feed/feed-provider-factory.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Feed/request-feed-refresh.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Feed/feed.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Feed/subscribe-to-feed-updates.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Feed/log-feed-displayed.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/ui/js/feed-css.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Feed/ui/show-feed.js"],"sourcesContent":["import {\n  convertMsToSeconds as h,\n  dateFromUnixTimestamp as l,\n} from \"../../util/date-utils.js\";\nimport { FEED_ANIMATION_DURATION as E } from \"../../common/constants.js\";\nimport T from \"../../managers/subscription-manager.js\";\nimport r from \"../../../shared-lib/logger.js\";\nexport default class Card {\n  constructor(t, i, s, h, l, n, e, r, u, E, o, T, I, a, N, c) {\n    (this.id = t),\n      (this.viewed = i),\n      (this.title = s),\n      (this.imageUrl = h),\n      (this.description = l),\n      (this.created = n),\n      (this.updated = e),\n      (this.categories = r),\n      (this.expiresAt = u),\n      (this.url = E),\n      (this.linkText = o),\n      (this.aspectRatio = T),\n      (this.extras = I),\n      (this.pinned = a),\n      (this.dismissible = N),\n      (this.clicked = c),\n      (this.id = t),\n      (this.viewed = i || !1),\n      (this.title = s || \"\"),\n      (this.imageUrl = h),\n      (this.description = l || \"\"),\n      (this.created = n || null),\n      (this.updated = e || null),\n      (this.categories = r || []),\n      (this.expiresAt = u || null),\n      (this.url = E),\n      (this.linkText = o),\n      null == T\n        ? (this.aspectRatio = null)\n        : ((T = parseFloat(T.toString())),\n          (this.aspectRatio = isNaN(T) ? null : T)),\n      (this.extras = I || {}),\n      (this.pinned = a || !1),\n      (this.dismissible = N || !1),\n      (this.dismissed = !1),\n      (this.clicked = c || !1),\n      (this.isControl = !1),\n      (this.test = !1),\n      (this.Et = null),\n      (this.Tt = null);\n  }\n  subscribeToClickedEvent(t) {\n    return this.Nt().It(t);\n  }\n  subscribeToDismissedEvent(t) {\n    return this.St().It(t);\n  }\n  removeSubscription(t) {\n    this.Nt().removeSubscription(t), this.St().removeSubscription(t);\n  }\n  removeAllSubscriptions() {\n    this.Nt().removeAllSubscriptions(), this.St().removeAllSubscriptions();\n  }\n  dismissCard() {\n    if (!this.dismissible || this.dismissed) return;\n    \"function\" == typeof this.logCardDismissal && this.logCardDismissal();\n    let t = this.T;\n    !t && this.id && (t = document.getElementById(this.id)),\n      t &&\n        ((t.style.height = t.offsetHeight + \"px\"),\n        (t.className = t.className + \" ab-hide\"),\n        setTimeout(function () {\n          t &&\n            t.parentNode &&\n            ((t.style.height = \"0\"),\n            (t.style.margin = \"0\"),\n            setTimeout(function () {\n              t && t.parentNode && t.parentNode.removeChild(t);\n            }, Card.At));\n        }, E));\n  }\n  Nt() {\n    return null == this.Et && (this.Et = new T()), this.Et;\n  }\n  St() {\n    return null == this.Tt && (this.Tt = new T()), this.Tt;\n  }\n  K() {\n    this.viewed = !0;\n  }\n  p() {\n    (this.viewed = !0), (this.clicked = !0), this.Nt().Dt();\n  }\n  N() {\n    return (\n      !(!this.dismissible || this.dismissed) &&\n      ((this.dismissed = !0), this.St().Dt(), !0)\n    );\n  }\n  Ct(t) {\n    if (null == t || t[Card.Rt.ht] !== this.id) return !0;\n    if (t[Card.Rt.Lt]) return !1;\n    if (\n      null != t[Card.Rt.nt] &&\n      null != this.updated &&\n      parseInt(t[Card.Rt.nt]) < h(this.updated.valueOf())\n    )\n      return !0;\n    if (\n      (t[Card.Rt.et] && !this.viewed && (this.viewed = !0),\n      t[Card.Rt.zt] && !this.clicked && (this.clicked = t[Card.Rt.zt]),\n      null != t[Card.Rt.rt] && (this.title = t[Card.Rt.rt]),\n      null != t[Card.Rt.ot] && (this.imageUrl = t[Card.Rt.ot]),\n      null != t[Card.Rt.ct] && (this.description = t[Card.Rt.ct]),\n      null != t[Card.Rt.nt])\n    ) {\n      const i = l(t[Card.Rt.nt]);\n      null != i && (this.updated = i);\n    }\n    if (null != t[Card.Rt.lt]) {\n      let i;\n      (i = t[Card.Rt.lt] === Card._t ? null : l(t[Card.Rt.lt])),\n        (this.expiresAt = i);\n    }\n    if (\n      (null != t[Card.Rt.URL] && (this.url = t[Card.Rt.URL]),\n      null != t[Card.Rt.ft] && (this.linkText = t[Card.Rt.ft]),\n      null != t[Card.Rt.xt])\n    ) {\n      const i = parseFloat(t[Card.Rt.xt].toString());\n      this.aspectRatio = isNaN(i) ? null : i;\n    }\n    return (\n      null != t[Card.Rt.bt] && (this.extras = t[Card.Rt.bt]),\n      null != t[Card.Rt.gt] && (this.pinned = t[Card.Rt.gt]),\n      null != t[Card.Rt.jt] && (this.dismissible = t[Card.Rt.jt]),\n      null != t[Card.Rt.kt] && (this.test = t[Card.Rt.kt]),\n      !0\n    );\n  }\n  Y() {\n    r.error(\"Must be implemented in a subclass\");\n  }\n}\n(Card._t = -1),\n  (Card.Rt = {\n    ht: \"id\",\n    et: \"v\",\n    jt: \"db\",\n    Lt: \"r\",\n    nt: \"ca\",\n    gt: \"p\",\n    lt: \"ea\",\n    bt: \"e\",\n    Z: \"tp\",\n    ot: \"i\",\n    rt: \"tt\",\n    ct: \"ds\",\n    URL: \"u\",\n    ft: \"dm\",\n    xt: \"ar\",\n    zt: \"cl\",\n    kt: \"t\",\n  }),\n  (Card.it = {\n    st: \"captioned_image\",\n    Ot: \"text_announcement\",\n    Mt: \"short_news\",\n    Pt: \"banner_image\",\n    Ut: \"control\",\n  }),\n  (Card.tt = {\n    ht: \"id\",\n    et: \"v\",\n    jt: \"db\",\n    dt: \"cr\",\n    nt: \"ca\",\n    gt: \"p\",\n    ut: \"t\",\n    lt: \"ea\",\n    bt: \"e\",\n    Z: \"tp\",\n    ot: \"i\",\n    rt: \"tt\",\n    ct: \"ds\",\n    URL: \"u\",\n    ft: \"dm\",\n    xt: \"ar\",\n    zt: \"cl\",\n    kt: \"s\",\n  }),\n  (Card.Gt = {\n    Xt: \"ADVERTISING\",\n    vt: \"ANNOUNCEMENTS\",\n    Vt: \"NEWS\",\n    Wt: \"SOCIAL\",\n  }),\n  (Card.At = 400);\n","import Card from \"./card.js\";\nexport default class ControlCard extends Card {\n  constructor(l, t, s, i, n, r) {\n    super(l, t, null, null, null, null, s, null, i, null, null, null, n, r),\n      (this.isControl = !0),\n      (this._ = \"ab-control-card\"),\n      (this.S = !1);\n  }\n  Y() {\n    const l = {};\n    return (\n      (l[Card.tt.Z] = Card.it.Ut),\n      (l[Card.tt.ht] = this.id),\n      (l[Card.tt.et] = this.viewed),\n      (l[Card.tt.nt] = this.updated),\n      (l[Card.tt.lt] = this.expiresAt),\n      (l[Card.tt.bt] = this.extras),\n      (l[Card.tt.gt] = this.pinned),\n      (l[Card.tt.kt] = this.test),\n      l\n    );\n  }\n}\n","import { logger as r } from \"../../shared-lib/index.js\";\nimport { ControlCard } from \"../Card/index.js\";\nexport const FEED_ANIMATION_DURATION = 500;\nexport default class x {\n  constructor(s, e) {\n    (this.cards = s),\n      (this.lastUpdated = e),\n      (this.cards = s),\n      (this.lastUpdated = e);\n  }\n  getUnreadCardCount() {\n    let s = 0;\n    for (const e of this.cards) e.viewed || e instanceof ControlCard || s++;\n    return s;\n  }\n  dr() {\n    r.error(\"Must be implemented in a subclass\");\n  }\n  logCardImpressions(s) {\n    r.error(\"Must be implemented in a subclass\");\n  }\n  logCardClick(s) {\n    r.error(\"Must be implemented in a subclass\");\n  }\n  sr() {\n    r.error(\"Must be implemented in a subclass\");\n  }\n}\n(x.ur = 6e4), (x.Ah = 500), (x.Co = 1e4);\n","import { ControlCard } from \"./models/index.js\";\nimport s from \"../common/event-logger.js\";\nimport t from \"../models/request-result.js\";\nimport { logger as r, EventTypes as i } from \"../../shared-lib/index.js\";\nimport { STORAGE_KEYS as o } from \"../managers/storage-manager.js\";\nexport default class a {\n  constructor(s) {\n    (this.u = s), (this.u = s);\n  }\n  h(n, e) {\n    const l = new t();\n    if ((n.p(), null == n.url || \"\" === n.url))\n      return (\n        r.info(`Card ${n.id} has no url. Not logging click to Braze servers.`),\n        l\n      );\n    if (e && n.id && this.u) {\n      const s = this.u.j(o.C.v) || {};\n      (s[n.id] = !0), this.u.k(o.C.v, s);\n    }\n    const u = this.D([n]);\n    if (null == u) return l;\n    const c = e ? i.I : i.$;\n    return s.q(c, u);\n  }\n  B(n) {\n    const e = new t();\n    if (!n.N())\n      return (\n        r.info(\n          `Card ${n.id} refused this dismissal. Ignoring analytics event.`,\n        ),\n        e\n      );\n    if (n.id && this.u) {\n      const s = this.u.j(o.C.A) || {};\n      (s[n.id] = !0), this.u.k(o.C.A, s);\n    }\n    const l = this.D([n]);\n    return null == l ? e : s.q(i.F, l);\n  }\n  G(n, r) {\n    const e = new t(!0),\n      l = [],\n      u = [];\n    let c = {};\n    this.u && (c = r ? this.u.j(o.C.H) || {} : this.u.j(o.C.J) || {});\n    for (const s of n)\n      s.K(),\n        s instanceof ControlCard ? u.push(s) : l.push(s),\n        s.id && (c[s.id] = !0);\n    const h = this.D(l),\n      a = this.D(u);\n    if (null == h && null == a) return (e.L = !1), e;\n    if ((this.u && (r ? this.u.k(o.C.H, c) : this.u.k(o.C.J, c)), null != h)) {\n      const t = r ? i.M : i.O,\n        n = s.q(t, h);\n      e.P(n);\n    }\n    if (null != a && r) {\n      const t = s.q(i.R, a);\n      e.P(t);\n    }\n    return e;\n  }\n  D(s) {\n    let t,\n      n = null;\n    for (let r = 0; r < s.length; r++)\n      (t = s[r].id),\n        null != t &&\n          \"\" !== t &&\n          ((n = n || {}), (n.ids = n.ids || []), n.ids.push(t));\n    return n;\n  }\n}\n","import a from \"./card-manager.js\";\nimport e from \"../managers/braze-instance.js\";\nconst n = {\n  t: !1,\n  i: null,\n  m: () => (n.o(), n.i || (n.i = new a(e.l())), n.i),\n  o: () => {\n    n.t || (e.g(n), (n.t = !0));\n  },\n  destroy: () => {\n    (n.i = null), (n.t = !1);\n  },\n};\nexport default n;\n","import { Card } from \"./models/index.js\";\nimport n from \"./card-manager-factory.js\";\nimport { MUST_BE_CARD_WARNING_SUFFIX as f } from \"../common/constants.js\";\nimport e from \"../managers/braze-instance.js\";\nimport { logger as r } from \"../../shared-lib/index.js\";\nexport function logCardDismissal(o) {\n  return (\n    !!e.X() && (o instanceof Card ? n.m().B(o).L : (r.error(\"card \" + f), !1))\n  );\n}\n","import { createCloseButton as d } from \"../../util/component-utils.js\";\nimport { detectSwipe as c, DIRECTIONS as m } from \"../../util/dom-utils.js\";\nimport { _handleBrazeAction as u } from \"../../Core/handle-braze-action.js\";\nimport { logCardDismissal } from \"../index.js\";\nimport { Guid as p } from \"../../../shared-lib/index.js\";\nexport const TOP_IMPRESSION_DATA_ATTRIBUTE = \"data-ab-had-top-impression\";\nexport const BOTTOM_IMPRESSION_DATA_ATTRIBUTE = \"data-ab-had-bottom-impression\";\nexport function topHadImpression(t) {\n  return null != t && !!t.getAttribute(\"data-ab-had-top-impression\");\n}\nexport function impressOnTop(t) {\n  null != t && t.setAttribute(\"data-ab-had-top-impression\", \"true\");\n}\nexport function bottomHadImpression(t) {\n  return null != t && !!t.getAttribute(\"data-ab-had-bottom-impression\");\n}\nexport function impressOnBottom(t) {\n  null != t && t.setAttribute(\"data-ab-had-bottom-impression\", \"true\");\n}\nexport function markCardAsRead(t) {\n  if (null != t) {\n    const o = t.querySelectorAll(\".ab-unread-indicator\")[0];\n    null != o && (o.className += \" read\");\n  }\n}\nexport function getCardId(t) {\n  return t.getAttribute(\"data-ab-card-id\");\n}\nexport function _setImageAltText(t, o) {\n  let e = \"\";\n  t.title || t.description || (e = \"Feed Image\"), o.setAttribute(\"alt\", e);\n}\nexport function setCardHeight(t, o) {\n  const e = o.querySelectorAll(\".ab-image-area\");\n  let a,\n    n = 0;\n  e.length > 0 && (n = e[0].offsetWidth);\n  for (const o of t)\n    if (((a = o.T), a && o.imageUrl && \"number\" == typeof o.aspectRatio)) {\n      const t = n / o.aspectRatio;\n      t && (a.style.height = `${t}px`);\n    }\n}\nexport function cardToHtml(t, logCardClick, o, e = \"ltr\") {\n  const a = document.createElement(\"div\");\n  (a.dir = e),\n    (a.className = \"ab-card ab-effect-card \" + t._),\n    t.id &&\n      (a.setAttribute(\"data-ab-card-id\", t.id), a.setAttribute(\"id\", t.id)),\n    a.setAttribute(\"role\", \"article\"),\n    a.setAttribute(\"tabindex\", \"0\");\n  let n = \"\",\n    i = !1;\n  t.url && \"\" !== t.url && ((n = t.url), (i = !0));\n  const r = (e) => (markCardAsRead(a), i && (logCardClick(t), u(n, o, e)), !1);\n  if (t.pinned) {\n    const t = document.createElement(\"div\");\n    t.className = \"ab-pinned-indicator\";\n    const o = document.createElement(\"i\");\n    (o.className = \"fa fa-star\"), t.appendChild(o), a.appendChild(t);\n  }\n  if (t.imageUrl && \"\" !== t.imageUrl) {\n    const o = document.createElement(\"div\");\n    (o.dir = e), (o.className = \"ab-image-area\");\n    const d = document.createElement(\"img\");\n    if (\n      (d.setAttribute(\"src\", t.imageUrl),\n      (d.onload = () => {\n        a.style.height = \"auto\";\n      }),\n      _setImageAltText(t, d),\n      o.appendChild(d),\n      (a.className += \" with-image\"),\n      i && !t.S)\n    ) {\n      const t = document.createElement(\"a\");\n      t.setAttribute(\"href\", n),\n        (t.onclick = r),\n        t.appendChild(o),\n        a.appendChild(t);\n    } else a.appendChild(o);\n  }\n  const s = document.createElement(\"div\");\n  if (((s.className = \"ab-card-body\"), (s.dir = e), t.dismissible)) {\n    t.logCardDismissal = () => logCardDismissal(t);\n    const o = d(\"Dismiss Card\", void 0, t.dismissCard.bind(t), e);\n    a.appendChild(o),\n      c(s, m.U, (t) => {\n        (a.className += \" ab-swiped-left\"), o.onclick(t);\n      }),\n      c(s, m.V, (t) => {\n        (a.className += \" ab-swiped-right\"), o.onclick(t);\n      });\n  }\n  let l = \"\",\n    b = !1;\n  if ((t.title && \"\" !== t.title && ((l = t.title), (b = !0)), b)) {\n    const t = document.createElement(\"h1\");\n    if (\n      ((t.className = \"ab-title\"),\n      (t.id = p.W()),\n      a.setAttribute(\"aria-labelledby\", t.id),\n      i)\n    ) {\n      const o = document.createElement(\"a\");\n      o.setAttribute(\"href\", n),\n        (o.onclick = r),\n        o.appendChild(document.createTextNode(l)),\n        t.appendChild(o);\n    } else t.appendChild(document.createTextNode(l));\n    s.appendChild(t);\n  }\n  const f = document.createElement(\"div\");\n  if (\n    ((f.className = b ? \"ab-description\" : \"ab-description ab-no-title\"),\n    (f.id = p.W()),\n    a.setAttribute(\"aria-describedby\", f.id),\n    t.description && f.appendChild(document.createTextNode(t.description)),\n    i)\n  ) {\n    const o = document.createElement(\"div\");\n    o.className = \"ab-url-area\";\n    const e = document.createElement(\"a\");\n    e.setAttribute(\"href\", n),\n      t.linkText && e.appendChild(document.createTextNode(t.linkText)),\n      (e.onclick = r),\n      o.appendChild(e),\n      f.appendChild(o);\n  }\n  s.appendChild(f), a.appendChild(s);\n  const x = document.createElement(\"div\");\n  return (\n    (x.className = \"ab-unread-indicator\"),\n    t.viewed && (x.className += \" read\"),\n    a.appendChild(x),\n    (t.T = a),\n    a\n  );\n}\n","import e from \"../managers/braze-instance.js\";\nexport function removeSubscription(r) {\n  e.X() && e.removeSubscription(r);\n}\n","import x from \"./base-feed.js\";\nimport {\n  bottomHadImpression as be,\n  getCardId as ye,\n  impressOnBottom as Fe,\n  impressOnTop as xe,\n  markCardAsRead as Te,\n  topHadImpression as Ee,\n} from \"../Card/display/card-display.js\";\nimport { bottomIsInView as he, topIsInView as Se } from \"../util/dom-utils.js\";\nimport { Card, ControlCard } from \"../Card/index.js\";\nimport { cardToHtml as _e } from \"../Card/display/card-display.js\";\nimport { isArray as j } from \"../util/code-utils.js\";\nimport { KeyCodes as mt } from \"../util/key-codes.js\";\nimport ue from \"../l10n/l10n-manager-factory.js\";\nimport { removeSubscription } from \"../Core/remove-subscription.js\";\nimport { logger as r, Guid as p } from \"../../shared-lib/index.js\";\nimport { BRAZE_ACTION_URI_REGEX as Z } from \"../util/validation-utils.js\";\nimport {\n  INELIGIBLE_BRAZE_ACTION_URL_ERROR_TYPES as bt,\n  ineligibleBrazeActionURLErrorMessage as vt,\n  getDecodedBrazeAction as W,\n  containsUnknownBrazeAction as jt,\n} from \"../util/braze-actions.js\";\nexport const LAST_REQUESTED_REFRESH_DATA_ATTRIBUTE =\n  \"data-last-requested-refresh\";\nexport const SUBSCRIPTION_ID_DATA_ATTRIBUTE = \"data-update-subscription-id\";\nexport const SCROLL_LISTENER_ID = \"data-listener-id\";\nexport const scrollListeners = {};\nexport function destroyFeedHtml(e) {\n  e &&\n    ((e.className = e.className.replace(\"ab-show\", \"ab-hide\")),\n    setTimeout(() => {\n      e && e.parentNode && e.parentNode.removeChild(e);\n    }, x.Ah));\n  const t = e.getAttribute(\"data-update-subscription-id\");\n  null != t && removeSubscription(t);\n  const o = e.getAttribute(\"data-listener-id\");\n  null != o &&\n    (window.removeEventListener(\"scroll\", scrollListeners[o]),\n    delete scrollListeners[o]);\n}\nexport function generateFeedBody(e, t) {\n  const o = ue.m(),\n    s = document.createElement(\"div\");\n  if (\n    ((s.className = \"ab-feed-body\"),\n    s.setAttribute(\"aria-label\", \"Feed\"),\n    s.setAttribute(\"role\", \"feed\"),\n    null == e.lastUpdated)\n  ) {\n    const e = document.createElement(\"div\");\n    e.className = \"ab-no-cards-message\";\n    const t = document.createElement(\"i\");\n    (t.className = \"fa fa-spinner fa-spin fa-4x ab-initial-spinner\"),\n      e.appendChild(t),\n      s.appendChild(e);\n  } else {\n    let n = !1;\n    const logCardClick = (t) => e.logCardClick(t);\n    for (const i of e.cards) {\n      const a = i instanceof ControlCard;\n      !a || e.dr()\n        ? (s.appendChild(_e(i, logCardClick, t, o.wo())), (n = n || !a))\n        : r.error(\n            \"Received a control card for a legacy news feed. Control cards are only supported with content cards.\",\n          );\n    }\n    if (!n) {\n      const e = document.createElement(\"div\");\n      (e.className = \"ab-no-cards-message\"),\n        (e.innerHTML = o.get(\"NO_CARDS_MESSAGE\") || \"\"),\n        e.setAttribute(\"role\", \"article\"),\n        s.appendChild(e);\n    }\n  }\n  return s;\n}\nexport function detectFeedImpressions(e, t) {\n  if (null != e && null != t) {\n    const o = [],\n      s = t.querySelectorAll(\".ab-card\");\n    e.yo || (e.yo = {});\n    for (let t = 0; t < s.length; t++) {\n      const n = ye(s[t]),\n        r = Se(s[t]),\n        i = he(s[t]);\n      if (e.yo[n]) {\n        r || i || Te(s[t]);\n        continue;\n      }\n      let a = Ee(s[t]),\n        d = be(s[t]);\n      const l = a,\n        c = d;\n      if (\n        (!a && r && ((a = !0), xe(s[t])),\n        !d && i && ((d = !0), Fe(s[t])),\n        a && d)\n      ) {\n        if (l && c) continue;\n        for (const t of e.cards)\n          if (t.id === n) {\n            (e.yo[t.id] = !0), o.push(t);\n            break;\n          }\n      }\n    }\n    o.length > 0 && e.logCardImpressions(o);\n  }\n}\nexport function refreshFeed(e, t) {\n  if (null == e || null == t) return;\n  t.setAttribute(\"aria-busy\", \"true\");\n  const o = t.querySelectorAll(\".ab-refresh-button\")[0];\n  null != o && (o.className += \" fa-spin\");\n  const s = new Date().valueOf().toString();\n  t.setAttribute(\"data-last-requested-refresh\", s),\n    setTimeout(() => {\n      if (t.getAttribute(\"data-last-requested-refresh\") === s) {\n        const e = t.querySelectorAll(\".fa-spin\");\n        for (let t = 0; t < e.length; t++)\n          e[t].className = e[t].className.replace(/fa-spin/g, \"\");\n        const o = t.querySelectorAll(\".ab-initial-spinner\")[0];\n        if (null != o) {\n          const e = document.createElement(\"span\");\n          (e.innerHTML = ue.m().get(\"FEED_TIMEOUT_MESSAGE\") || \"\"),\n            null != o.parentNode &&\n              (o.parentNode.appendChild(e), o.parentNode.removeChild(o));\n        }\n        \"true\" === t.getAttribute(\"aria-busy\") &&\n          t.setAttribute(\"aria-busy\", \"false\");\n      }\n    }, x.Co),\n    e.sr();\n}\nexport function feedToHtml(e, t, o) {\n  const s = document.createElement(\"div\");\n  (s.className = \"ab-feed ab-hide ab-effect-slide\"),\n    s.setAttribute(\"role\", \"dialog\"),\n    s.setAttribute(\"aria-label\", \"Feed\"),\n    s.setAttribute(\"tabindex\", \"-1\");\n  const n = document.createElement(\"div\");\n  (n.className = \"ab-feed-buttons-wrapper\"),\n    n.setAttribute(\"role\", \"group\"),\n    s.appendChild(n);\n  const r = document.createElement(\"i\");\n  (r.className = \"fa fa-times ab-close-button\"),\n    r.setAttribute(\"aria-label\", \"Close Feed\"),\n    r.setAttribute(\"tabindex\", \"0\"),\n    r.setAttribute(\"role\", \"button\");\n  const i = (e) => {\n    destroyFeedHtml(s), e.stopPropagation();\n  };\n  r.addEventListener(\"keydown\", (e) => {\n    (e.keyCode !== mt.Fo && e.keyCode !== mt.To) || i(e);\n  }),\n    (r.onclick = i);\n  const a = document.createElement(\"i\");\n  (a.className = \"fa fa-refresh ab-refresh-button\"),\n    e && null == e.lastUpdated && (a.className += \" fa-spin\"),\n    a.setAttribute(\"aria-label\", \"Refresh Feed\"),\n    a.setAttribute(\"tabindex\", \"0\"),\n    a.setAttribute(\"role\", \"button\");\n  const d = (t) => {\n    refreshFeed(e, s), t.stopPropagation();\n  };\n  a.addEventListener(\"keydown\", (e) => {\n    (e.keyCode !== mt.Fo && e.keyCode !== mt.To) || d(e);\n  }),\n    (a.onclick = d),\n    n.appendChild(a),\n    n.appendChild(r),\n    s.appendChild(generateFeedBody(e, t));\n  const l = () => detectFeedImpressions(e, s);\n  if ((s.addEventListener(\"scroll\", l), !o)) {\n    window.addEventListener(\"scroll\", l);\n    const e = p.W();\n    (scrollListeners[e] = l), s.setAttribute(\"data-listener-id\", e);\n  }\n  return s;\n}\nexport function updateFeedCards(e, t, o, s, n) {\n  if (!j(t)) return;\n  const i = [];\n  for (const e of t)\n    if (e instanceof Card) {\n      if (e.url && Z.test(e.url)) {\n        const t = W(e.url);\n        if (jt(t)) {\n          r.error(vt(bt.Li, \"Content Card\"));\n          continue;\n        }\n      }\n      i.push(e);\n    }\n  if (((e.cards = i), (e.lastUpdated = o), null != s))\n    if ((s.setAttribute(\"aria-busy\", \"false\"), null == e.lastUpdated))\n      destroyFeedHtml(s);\n    else {\n      const t = s.querySelectorAll(\".ab-feed-body\")[0];\n      if (null != t) {\n        const o = generateFeedBody(e, n);\n        t.parentNode && t.parentNode.replaceChild(o, t),\n          detectFeedImpressions(e, o.parentNode);\n      }\n    }\n}\nexport function registerFeedSubscriptionId(e, t) {\n  e && t.setAttribute(\"data-update-subscription-id\", e);\n}\n","import { Card } from \"./models/index.js\";\nimport n from \"./card-manager-factory.js\";\nimport e from \"../managers/braze-instance.js\";\nimport { isArray as j } from \"../util/code-utils.js\";\nimport { MUST_BE_CARD_WARNING_SUFFIX as f } from \"../common/constants.js\";\nimport { logger as r } from \"../../shared-lib/index.js\";\nexport function logCardImpressions(o, s) {\n  if (!e.X()) return !1;\n  if (!j(o)) return r.error(\"cards must be an array\"), !1;\n  for (const n of o)\n    if (!(n instanceof Card)) return r.error(`Each card in cards ${f}`), !1;\n  return n.m().G(o, s).L;\n}\n","import { Card } from \"./models/index.js\";\nimport n from \"./card-manager-factory.js\";\nimport { MUST_BE_CARD_WARNING_SUFFIX as f } from \"../common/constants.js\";\nimport e from \"../managers/braze-instance.js\";\nimport { logger as r } from \"../../shared-lib/index.js\";\nexport function logCardClick(o, m) {\n  return (\n    !!e.X() &&\n    (o instanceof Card ? n.m().h(o, m).L : (r.error(\"card \" + f), !1))\n  );\n}\n","import Card from \"./card.js\";\nexport default class ClassicCard extends Card {\n  constructor(s, t, i, h, r, c, e, a, o, d, l, n, u, p, f, m) {\n    super(s, t, i, h, r, c, e, a, o, d, l, n, u, p, f, m),\n      (this._ = \"ab-classic-card\"),\n      (this.S = !0);\n  }\n  Y() {\n    const s = {};\n    return (\n      (s[Card.tt.Z] = Card.it.Mt),\n      (s[Card.tt.ht] = this.id),\n      (s[Card.tt.et] = this.viewed),\n      (s[Card.tt.rt] = this.title),\n      (s[Card.tt.ot] = this.imageUrl),\n      (s[Card.tt.ct] = this.description),\n      (s[Card.tt.nt] = this.updated),\n      (s[Card.tt.dt] = this.created),\n      (s[Card.tt.ut] = this.categories),\n      (s[Card.tt.lt] = this.expiresAt),\n      (s[Card.tt.URL] = this.url),\n      (s[Card.tt.ft] = this.linkText),\n      (s[Card.tt.xt] = this.aspectRatio),\n      (s[Card.tt.bt] = this.extras),\n      (s[Card.tt.gt] = this.pinned),\n      (s[Card.tt.jt] = this.dismissible),\n      (s[Card.tt.zt] = this.clicked),\n      (s[Card.tt.kt] = this.test),\n      s\n    );\n  }\n}\n","import Card from \"./card.js\";\nexport default class CaptionedImage extends Card {\n  constructor(t, s, i, h, e, r, a, o, c, n, d, p, u, l, m, f) {\n    super(t, s, i, h, e, r, a, o, c, n, d, p, u, l, m, f),\n      (this._ = \"ab-captioned-image\"),\n      (this.S = !0),\n      (this.test = !1);\n  }\n  Y() {\n    const t = {};\n    return (\n      (t[Card.tt.Z] = Card.it.st),\n      (t[Card.tt.ht] = this.id),\n      (t[Card.tt.et] = this.viewed),\n      (t[Card.tt.rt] = this.title),\n      (t[Card.tt.ot] = this.imageUrl),\n      (t[Card.tt.ct] = this.description),\n      (t[Card.tt.nt] = this.updated),\n      (t[Card.tt.dt] = this.created),\n      (t[Card.tt.ut] = this.categories),\n      (t[Card.tt.lt] = this.expiresAt),\n      (t[Card.tt.URL] = this.url),\n      (t[Card.tt.ft] = this.linkText),\n      (t[Card.tt.xt] = this.aspectRatio),\n      (t[Card.tt.bt] = this.extras),\n      (t[Card.tt.gt] = this.pinned),\n      (t[Card.tt.jt] = this.dismissible),\n      (t[Card.tt.zt] = this.clicked),\n      (t[Card.tt.kt] = this.test),\n      t\n    );\n  }\n}\n","import Card from \"./card.js\";\nexport default class ImageOnly extends Card {\n  constructor(s, t, i, h, r, e, l, n, o, a, u, c, d, m) {\n    super(s, t, null, i, null, h, r, e, l, n, o, a, u, c, d, m),\n      (this._ = \"ab-image-only\"),\n      (this.S = !1),\n      (this.test = !1);\n  }\n  Y() {\n    const s = {};\n    return (\n      (s[Card.tt.Z] = Card.it.Pt),\n      (s[Card.tt.ht] = this.id),\n      (s[Card.tt.et] = this.viewed),\n      (s[Card.tt.ot] = this.imageUrl),\n      (s[Card.tt.nt] = this.updated),\n      (s[Card.tt.dt] = this.created),\n      (s[Card.tt.ut] = this.categories),\n      (s[Card.tt.lt] = this.expiresAt),\n      (s[Card.tt.URL] = this.url),\n      (s[Card.tt.ft] = this.linkText),\n      (s[Card.tt.xt] = this.aspectRatio),\n      (s[Card.tt.bt] = this.extras),\n      (s[Card.tt.gt] = this.pinned),\n      (s[Card.tt.jt] = this.dismissible),\n      (s[Card.tt.zt] = this.clicked),\n      (s[Card.tt.kt] = this.test),\n      s\n    );\n  }\n}\n","import {\n  Card,\n  CaptionedImage,\n  ClassicCard,\n  ControlCard,\n  ImageOnly,\n} from \"../index.js\";\nimport {\n  dateFromUnixTimestamp as l,\n  rehydrateDateAfterJsonization as w,\n} from \"../../util/date-utils.js\";\nimport { logger as r } from \"../../../shared-lib/index.js\";\nexport function newCard(n, e, t, o, i, l, u, d, a, w, f, s, m, C, p, c, x, F) {\n  let j;\n  if (e === Card.it.Ot || e === Card.it.Mt)\n    j = new ClassicCard(n, t, o, i, l, u, d, a, w, f, s, m, C, p, c, x);\n  else if (e === Card.it.st)\n    j = new CaptionedImage(n, t, o, i, l, u, d, a, w, f, s, m, C, p, c, x);\n  else if (e === Card.it.Pt)\n    j = new ImageOnly(n, t, i, u, d, a, w, f, s, m, C, p, c, x);\n  else {\n    if (e !== Card.it.Ut)\n      return r.error(\"Ignoring card with unknown type \" + e), null;\n    j = new ControlCard(n, t, d, w, C, p);\n  }\n  return F && (j.test = F), j;\n}\nexport function newCardFromContentCardsJson(n) {\n  if (n[Card.Rt.Lt]) return null;\n  const e = n[Card.Rt.ht],\n    r = n[Card.Rt.Z],\n    t = n[Card.Rt.et],\n    o = n[Card.Rt.rt],\n    i = n[Card.Rt.ot],\n    u = n[Card.Rt.ct],\n    d = l(n[Card.Rt.nt]),\n    a = d;\n  let w;\n  w = n[Card.Rt.lt] === Card._t ? null : l(n[Card.Rt.lt]);\n  return newCard(\n    e,\n    r,\n    t,\n    o,\n    i,\n    u,\n    a,\n    d,\n    null,\n    w,\n    n[Card.Rt.URL],\n    n[Card.Rt.ft],\n    n[Card.Rt.xt],\n    n[Card.Rt.bt],\n    n[Card.Rt.gt],\n    n[Card.Rt.jt],\n    n[Card.Rt.zt],\n    n[Card.Rt.kt] || !1,\n  );\n}\nexport function newCardFromFeedJson(n) {\n  return newCard(\n    n.id,\n    n.type,\n    n.viewed,\n    n.title,\n    n.image,\n    n.description,\n    l(n.created),\n    l(n.updated),\n    n.categories,\n    l(n.expires_at),\n    n.url,\n    n.domain,\n    n.aspect_ratio,\n    n.extras,\n    !1,\n    !1,\n  );\n}\nexport function newCardFromSerializedValue(n) {\n  return (\n    newCard(\n      n[Card.tt.ht],\n      n[Card.tt.Z],\n      n[Card.tt.et],\n      n[Card.tt.rt],\n      n[Card.tt.ot],\n      n[Card.tt.ct],\n      w(n[Card.tt.dt]),\n      w(n[Card.tt.nt]),\n      n[Card.tt.ut],\n      w(n[Card.tt.lt]),\n      n[Card.tt.URL],\n      n[Card.tt.ft],\n      n[Card.tt.xt],\n      n[Card.tt.bt],\n      n[Card.tt.gt],\n      n[Card.tt.jt],\n      n[Card.tt.zt],\n      n[Card.tt.kt] || !1,\n    ) || void 0\n  );\n}\n","import y from \"../common/base-provider.js\";\nimport e from \"../managers/braze-instance.js\";\nimport Feed from \"./feed.js\";\nimport {\n  newCardFromFeedJson as ht,\n  newCardFromSerializedValue as S,\n} from \"../Card/util/card-factory.js\";\nimport { rehydrateDateAfterJsonization as w } from \"../util/date-utils.js\";\nimport { STORAGE_KEYS as o } from \"../managers/storage-manager.js\";\nimport T from \"../managers/subscription-manager.js\";\nexport default class ee extends y {\n  constructor(t, s) {\n    super(),\n      (this.u = t),\n      (this.zi = s),\n      (this.cards = []),\n      (this.Ni = null),\n      (this.u = t),\n      (this.zi = s),\n      (this.Jt = new T()),\n      e.$t(this.Jt),\n      this.Kt();\n  }\n  Kt() {\n    let t = [];\n    this.u && (t = this.u.j(o.C.Ui) || []);\n    const s = [];\n    for (let i = 0; i < t.length; i++) {\n      const e = S(t[i]);\n      null != e && s.push(e);\n    }\n    (this.cards = s), this.u && (this.Ni = w(this.u.j(o.C.ki)));\n  }\n  Ai(t) {\n    const s = [];\n    let i = null,\n      e = {};\n    this.u && (e = this.u.j(o.C.J) || {});\n    const r = {};\n    for (let h = 0; h < t.length; h++) {\n      i = t[h];\n      const o = ht(i);\n      if (null != o) {\n        const t = o.id;\n        t && e[t] && ((o.viewed = !0), (r[t] = !0)), s.push(o);\n      }\n    }\n    (this.cards = s),\n      this.Rs(),\n      (this.Ni = new Date()),\n      this.u && (this.u.k(o.C.J, r), this.u.k(o.C.ki, this.Ni));\n  }\n  Rs() {\n    var t;\n    const s = [];\n    for (let t = 0; t < this.cards.length; t++) s.push(this.cards[t].Y());\n    null === (t = this.u) || void 0 === t || t.k(o.C.Ui, s);\n  }\n  Ns(t) {\n    null != t &&\n      t.feed &&\n      (this.Kt(),\n      this.Ai(t.feed),\n      this.Jt.Dt(new Feed(this.cards.slice(), this.Ni)));\n  }\n  Bi() {\n    this.Kt();\n    const t = [],\n      s = new Date();\n    for (let i = 0; i < this.cards.length; i++) {\n      const e = this.cards[i].expiresAt;\n      let r = !0;\n      null != e && (r = e >= s), r && t.push(this.cards[i]);\n    }\n    return new Feed(t, this.Ni);\n  }\n  xs() {\n    this.zi && this.zi.requestFeedRefresh();\n  }\n  Zs(t) {\n    return this.Jt.It(t);\n  }\n  clearData(t) {\n    null == t && (t = !1),\n      (this.cards = []),\n      (this.Ni = null),\n      t && this.u && (this.u.ti(o.C.Ui), this.u.ti(o.C.ki)),\n      this.Jt.Dt(new Feed(this.cards.slice(), this.Ni));\n  }\n}\n","import e from \"../managers/braze-instance.js\";\nimport ee from \"./feed-provider.js\";\nconst re = {\n  t: !1,\n  provider: null,\n  rr: () => (\n    re.o(),\n    re.provider || ((re.provider = new ee(e.l(), e.cr())), e.ar(re.provider)),\n    re.provider\n  ),\n  o: () => {\n    re.t || (e.g(re), (re.t = !0));\n  },\n  destroy: () => {\n    (re.provider = null), (re.t = !1);\n  },\n};\nexport default re;\n","import e from \"../managers/braze-instance.js\";\nimport re from \"./feed-provider-factory.js\";\nexport function requestFeedRefresh() {\n  if (e.X()) return re.rr().xs();\n}\n","import x from \"../common/base-feed.js\";\nimport { logCardClick, logCardImpressions } from \"../Card/index.js\";\nimport { requestFeedRefresh } from \"./request-feed-refresh.js\";\nexport default class Feed extends x {\n  constructor(r, e) {\n    super(r, e);\n  }\n  logCardImpressions(r) {\n    logCardImpressions(r, !1);\n  }\n  logCardClick(r) {\n    return logCardClick(r, !1);\n  }\n  sr() {\n    requestFeedRefresh();\n  }\n  dr() {\n    return !1;\n  }\n}\n","import e from \"../managers/braze-instance.js\";\nimport re from \"./feed-provider-factory.js\";\nexport function subscribeToFeedUpdates(r) {\n  if (e.X()) return re.rr().Zs(r);\n}\n","import e from \"../managers/braze-instance.js\";\nimport { InternalEventTypes as or } from \"../../shared-lib/index.js\";\nexport function logFeedDisplayed() {\n  var r;\n  if (e.X())\n    return null === (r = e.nr()) || void 0 === r ? void 0 : r.qr(or.Ar).L;\n}\n","import { attachCSS as Ce } from \"./attach-css.js\";\nimport { loadFontAwesome as Ie } from \"./load-font-awesome.js\";\nexport function attachFeedCSS(t) {\n  Ce(\n    t,\n    \"feed\",\n    \"body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:9011;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button[dir=rtl]{left:0}.ab-feed .ab-card .ab-close-button[dir=ltr]{right:0}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-image-only .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=ltr]{padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=rtl]{padding-right:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area[dir=rtl]{padding:20px 25px 25px 0}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}\",\n  );\n}\nexport function setupFeedUI() {\n  attachFeedCSS(), Ie();\n}\n","import e, { OPTIONS as L } from \"../../managers/braze-instance.js\";\nimport {\n  destroyFeedHtml as z,\n  detectFeedImpressions as q,\n  feedToHtml as I,\n  LAST_REQUESTED_REFRESH_DATA_ATTRIBUTE as M,\n  refreshFeed as $,\n  registerFeedSubscriptionId as B,\n  updateFeedCards as F,\n} from \"../../common/feed-display.js\";\nimport { Feed, logFeedDisplayed, subscribeToFeedUpdates } from \"../index.js\";\nimport re from \"../feed-provider-factory.js\";\nimport { intersection as te } from \"../../util/code-utils.js\";\nimport { setCardHeight as G } from \"../../Card/display/card-display.js\";\nimport { setupFeedUI as H } from \"../../ui/js/index.js\";\nimport { logger as r } from \"../../../shared-lib/index.js\";\nexport function showFeed(t, n, o) {\n  if (!e.X()) return;\n  H();\n  const i = (e, t) => {\n      if (null == t) return e;\n      const n = [];\n      for (let e = 0; e < t.length; e++) n.push(t[e].toLowerCase());\n      const o = [];\n      for (let t = 0; t < e.length; t++) {\n        const r = [],\n          i = e[t].categories || [];\n        for (let e = 0; e < i.length; e++) r.push(i[e].toLowerCase());\n        te(r, n).length > 0 && o.push(e[t]);\n      }\n      return o;\n    },\n    s = e.nn(L.tn) || e.nn(L.en) || !1;\n  let l = !1;\n  null == t && ((t = document.body), (l = !0));\n  let f,\n    a = !1;\n  null == n\n    ? ((f = re.rr().Bi()),\n      F(f, i(f.cards, o), f.lastUpdated, null, s),\n      (a = !0))\n    : (f = new Feed(i(n, o), new Date()));\n  const u = I(f, s, l);\n  if (a) {\n    (null == f.lastUpdated ||\n      new Date().valueOf() - f.lastUpdated.valueOf() > Feed.ur) &&\n      (r.info(\n        `Cached feed was older than max TTL of ${Feed.ur} ms, requesting an update from the server.`,\n      ),\n      $(f, u));\n    const e = new Date().valueOf(),\n      t = subscribeToFeedUpdates(function (t) {\n        const n = u.querySelectorAll(\".ab-refresh-button\")[0];\n        if (null != n) {\n          let t = 500;\n          t -= new Date().valueOf() - e;\n          const o = u.getAttribute(M);\n          if (o) {\n            const e = parseInt(o);\n            isNaN(e) || (t -= new Date().valueOf() - e);\n          }\n          setTimeout(\n            function () {\n              n.className = n.className.replace(/fa-spin/g, \"\");\n            },\n            Math.max(t, 0),\n          );\n        }\n        F(f, i(t.cards, o), t.lastUpdated, u, s);\n      });\n    B(t, u);\n  }\n  const d = (e) => {\n    const t = e.querySelectorAll(\".ab-feed\");\n    let n = null;\n    for (let o = 0; o < t.length; o++) t[o].parentNode === e && (n = t[o]);\n    null != n\n      ? (z(n), n.parentNode && n.parentNode.replaceChild(u, n))\n      : e.appendChild(u),\n      setTimeout(function () {\n        u.className = u.className.replace(\"ab-hide\", \"ab-show\");\n      }, 0),\n      l && u.focus(),\n      logFeedDisplayed(),\n      q(f, u),\n      f && G(f.cards, e);\n  };\n  var m;\n  null != t\n    ? d(t)\n    : (window.onload =\n        ((m = window.onload),\n        function () {\n          \"function\" == typeof m && m(new Event(\"oldLoad\")), d(document.body);\n        }));\n}\n"],"names":["convertMsToSeconds","h","dateFromUnixTimestamp","l","FEED_ANIMATION_DURATION","E","T","r","Card","t","i","s","n","e","u","o","I","a","N","c","parseFloat","isNaN","subscribeToClickedEvent","subscribeToDismissedEvent","removeSubscription","removeAllSubscriptions","dismissCard","document","setTimeout","Nt","St","K","p","Ct","parseInt","i1","i2","Y","ControlCard","logger","x","getUnreadCardCount","_iteratorError","_instanceof","dr","logCardImpressions","logCardClick","sr","EventTypes","STORAGE_KEYS","_$s","B","G","_$a","_$t","_$n","_$t1","D","MUST_BE_CARD_WARNING_SUFFIX","f","logCardDismissal","createCloseButton","d","detectSwipe","DIRECTIONS","m","_handleBrazeAction","Guid","TOP_IMPRESSION_DATA_ATTRIBUTE","BOTTOM_IMPRESSION_DATA_ATTRIBUTE","topHadImpression","impressOnTop","bottomHadImpression","impressOnBottom","markCardAsRead","getCardId","_setImageAltText","setCardHeight","_$o","cardToHtml","o1","o2","_$d","o3","b","_$t2","o4","o5","e1","be","ye","Fe","xe","Te","Ee","bottomIsInView","he","topIsInView","Se","_e","isArray","j","KeyCodes","mt","ue","BRAZE_ACTION_URI_REGEX","Z","INELIGIBLE_BRAZE_ACTION_URL_ERROR_TYPES","bt","ineligibleBrazeActionURLErrorMessage","vt","getDecodedBrazeAction","W","containsUnknownBrazeAction","jt","LAST_REQUESTED_REFRESH_DATA_ATTRIBUTE","SUBSCRIPTION_ID_DATA_ATTRIBUTE","SCROLL_LISTENER_ID","scrollListeners","destroyFeedHtml","window","generateFeedBody","_$e","_$e1","detectFeedImpressions","refreshFeed","Date","feedToHtml","updateFeedCards","registerFeedSubscriptionId","ClassicCard","CaptionedImage","ImageOnly","rehydrateDateAfterJsonization","w","newCard","C","F","newCardFromContentCardsJson","newCardFromFeedJson","newCardFromSerializedValue","y","Feed","ht","S","ee","Kt","Ai","Rs","t1","Ns","Bi","xs","Zs","clearData","re","requestFeedRefresh","logCardImpressions1","logCardClick1","subscribeToFeedUpdates","InternalEventTypes","or","logFeedDisplayed","attachCSS","Ce","loadFontAwesome","Ie","attachFeedCSS","setupFeedUI","OPTIONS","L","z","q","M","$","intersection","te","H","showFeed","_$r","Math","Event"],"mappings":"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"}