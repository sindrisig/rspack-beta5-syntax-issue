{"version":3,"file":"570.js","sources":["webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/shared-lib/encoding-utils.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Push/push-manager.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Push/push-manager-factory.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/Push/unregister-push.js"],"sourcesContent":["const ei = {\n  Tn: function (t) {\n    const r = (t + \"=\".repeat((4 - (t.length % 4)) % 4))\n        .replace(/\\-/g, \"+\")\n        .replace(/_/g, \"/\"),\n      n = atob(r),\n      o = new Uint8Array(n.length);\n    for (let t = 0; t < n.length; ++t) o[t] = n.charCodeAt(t);\n    return o;\n  },\n};\nexport default ei;\n","import { isArray as j, isEqual as ii } from \"../util/code-utils.js\";\nimport ti from \"../models/push-token.js\";\nimport { logger as r, EncodingUtils as ei } from \"../../shared-lib/index.js\";\nimport { STORAGE_KEYS as o } from \"../managers/storage-manager.js\";\nimport { User } from \"../User/index.js\";\nimport yt from \"./utils/push-utils.js\";\nimport { getErrorMessage as si } from \"../util/error-utils.js\";\nexport default class ea {\n  constructor(i, t, e, s, r, n, o, u, a, h, c) {\n    (this.sn = i),\n      (this.rn = t),\n      (this.on = e),\n      (this.un = r),\n      (this.an = n),\n      (this.hn = o),\n      (this.yt = u),\n      (this.cn = a),\n      (this.fn = h),\n      (this.u = c),\n      (this.sn = i),\n      (this.rn = t),\n      (this.on = e),\n      (this.ln = s + \"/safari/\" + t),\n      (this.un = r || \"/service-worker.js\"),\n      (this.hn = o),\n      (this.yt = u),\n      (this.cn = a || !1),\n      (this.fn = h || !1),\n      (this.u = c),\n      (this.dn = yt.pn()),\n      (this.bn = yt.yn());\n  }\n  mn() {\n    return this.fn;\n  }\n  gn(i, t, e, s, n) {\n    i.unsubscribe()\n      .then((i) => {\n        i\n          ? this.vn(t, e, s, n)\n          : (r.error(\"Failed to unsubscribe device from push.\"),\n            \"function\" == typeof n && n(!1));\n      })\n      .catch((i) => {\n        r.error(\"Push unsubscription error: \" + i),\n          \"function\" == typeof n && n(!1);\n      });\n  }\n  wn(i, t, e) {\n    var s;\n    const n = ((i) => {\n      if (\"string\" == typeof i) return i;\n      if (0 !== i.endpoint.indexOf(\"https://android.googleapis.com/gcm/send\"))\n        return i.endpoint;\n      let t = i.endpoint;\n      const e = i;\n      return (\n        e.kn &&\n          -1 === i.endpoint.indexOf(e.kn) &&\n          (t = i.endpoint + \"/\" + e.kn),\n        t\n      );\n    })(i);\n    let o = null,\n      u = null;\n    const a = i;\n    if (null != a.getKey)\n      try {\n        const i = Array.from(new Uint8Array(a.getKey(\"p256dh\"))),\n          t = Array.from(new Uint8Array(a.getKey(\"auth\")));\n        (o = btoa(String.fromCharCode.apply(null, i))),\n          (u = btoa(String.fromCharCode.apply(null, t)));\n      } catch (i) {\n        r.error(si(i));\n      }\n    const h = ((i) => {\n      let t;\n      return i.options &&\n        (t = i.options.applicationServerKey) &&\n        t.byteLength &&\n        t.byteLength > 0\n        ? btoa(String.fromCharCode.apply(null, Array.from(new Uint8Array(t))))\n            .replace(/\\+/g, \"-\")\n            .replace(/\\//g, \"_\")\n        : null;\n    })(a);\n    null === (s = this.sn) || void 0 === s || s.Pn(n, t, o, u, h),\n      n && \"function\" == typeof e && e(n, o, u);\n  }\n  Dn() {\n    var i;\n    null === (i = this.sn) || void 0 === i || i.Sn(!0);\n  }\n  An(i, t) {\n    var e;\n    null === (e = this.sn) || void 0 === e || e.Sn(!1),\n      r.info(i),\n      \"function\" == typeof t && t(!1);\n  }\n  jn(i, t, e, s) {\n    var n;\n    if (\"default\" === t.permission)\n      try {\n        window.safari.pushNotification.requestPermission(\n          this.ln,\n          i,\n          {\n            api_key: this.rn,\n            device_id:\n              (null === (n = this.on) || void 0 === n ? void 0 : n.ce().id) ||\n              \"\",\n          },\n          (t) => {\n            \"granted\" === t.permission &&\n              this.sn &&\n              this.sn.setPushNotificationSubscriptionType(\n                User.NotificationSubscriptionTypes.OPTED_IN,\n              ),\n              this.jn(i, t, e, s);\n          },\n        );\n      } catch (i) {\n        this.An(\"Could not request permission for push: \" + i, s);\n      }\n    else\n      \"denied\" === t.permission\n        ? this.An(\n            \"The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.\",\n            s,\n          )\n        : \"granted\" === t.permission &&\n          (r.info(\"Device successfully subscribed to push.\"),\n          this.wn(t.deviceToken, new Date(), e));\n  }\n  requestPermission(i, t, e) {\n    const s = (s) => {\n      switch (s) {\n        case \"granted\":\n          return void (\"function\" == typeof i && i());\n        case \"default\":\n          return void (\"function\" == typeof t && t());\n        case \"denied\":\n          return void (\"function\" == typeof e && e());\n        default:\n          r.error(\"Received unexpected permission result \" + s);\n      }\n    };\n    let n = !1;\n    if (\"default\" !== window.Notification.permission)\n      s(Notification.permission);\n    else {\n      const i = window.Notification.requestPermission((i) => {\n        n && s(i);\n      });\n      i\n        ? i.then((i) => {\n            s(i);\n          })\n        : (n = !0);\n    }\n  }\n  vn(i, t, e, s) {\n    const n = { userVisibleOnly: !0 };\n    null != t && (n.applicationServerKey = t),\n      i.pushManager\n        .subscribe(n)\n        .then((i) => {\n          r.info(\"Device successfully subscribed to push.\"),\n            this.wn(i, new Date(), e);\n        })\n        .catch((i) => {\n          yt.isPushBlocked()\n            ? (r.info(\"Permission for push notifications was denied.\"),\n              \"function\" == typeof s && s(!1))\n            : (r.error(\"Push subscription failed: \" + i),\n              \"function\" == typeof s && s(!0));\n        });\n  }\n  xn() {\n    if (this.cn) return navigator.serviceWorker.getRegistration(this.un);\n    const i = this.an ? { scope: this.an } : void 0;\n    return navigator.serviceWorker.register(this.un, i).then(() =>\n      navigator.serviceWorker.ready.then(\n        (i) => (\n          i &&\n            \"function\" == typeof i.update &&\n            i.update().catch((i) => {\n              r.info(\"ServiceWorker update failed: \" + i);\n            }),\n          i\n        ),\n      ),\n    );\n  }\n  Nn(i) {\n    this.cn ||\n      (i.unregister(), r.info(\"Service worker successfully unregistered.\"));\n  }\n  subscribe(i, t) {\n    if (!yt.isPushSupported())\n      return r.info(ea.Un), void (\"function\" == typeof t && t(!1));\n    if (this.dn) {\n      if (!this.cn && null != window.location) {\n        let i = this.un;\n        -1 === i.indexOf(window.location.host) &&\n          (i = window.location.host + i),\n          -1 === i.indexOf(window.location.protocol) &&\n            (i = window.location.protocol + \"//\" + i);\n      }\n      if (yt.isPushBlocked())\n        return void this.An(\n          \"Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.\",\n          t,\n        );\n      if (this.yt && !this.yt.Wn() && 0 === this.yt.ii())\n        return (\n          r.info(\n            \"Waiting for VAPID key from server config before subscribing to push.\",\n          ),\n          void this.yt._n(() => {\n            this.subscribe(i, t);\n          })\n        );\n      const e = () => {\n          r.info(\"Permission for push notifications was denied.\"),\n            \"function\" == typeof t && t(!1);\n        },\n        s = () => {\n          let i = \"Permission for push notifications was ignored.\";\n          yt.isPushBlocked() &&\n            (i +=\n              \" The browser has automatically blocked further permission requests for a period (probably 1 week).\"),\n            r.info(i),\n            \"function\" == typeof t && t(!0);\n        },\n        n = yt.isPushPermissionGranted(),\n        u = () => {\n          !n &&\n            this.sn &&\n            this.sn.setPushNotificationSubscriptionType(\n              User.NotificationSubscriptionTypes.OPTED_IN,\n            ),\n            this.xn()\n              .then((e) => {\n                if (null == e)\n                  return (\n                    r.error(\n                      \"No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush.\",\n                    ),\n                    void (\"function\" == typeof t && t(!0))\n                  );\n                e.pushManager\n                  .getSubscription()\n                  .then((s) => {\n                    var n;\n                    let u = null;\n                    if (\n                      (null !=\n                        (null === (n = this.yt) || void 0 === n\n                          ? void 0\n                          : n.Wn()) && (u = ei.Tn(this.yt.Wn())),\n                      s)\n                    ) {\n                      let n,\n                        a = null,\n                        h = null;\n                      if ((this.u && (n = this.u.j(o.C.In)), n && !j(n))) {\n                        let i;\n                        try {\n                          i = ti.qn(n).Vn;\n                        } catch (t) {\n                          i = null;\n                        }\n                        null == i ||\n                          isNaN(i.getTime()) ||\n                          0 === i.getTime() ||\n                          ((a = i),\n                          (h = new Date(a)),\n                          h.setMonth(a.getMonth() + 6));\n                      }\n                      null != u &&\n                      s.options &&\n                      s.options.applicationServerKey &&\n                      s.options.applicationServerKey.byteLength &&\n                      s.options.applicationServerKey.byteLength > 0 &&\n                      !ii(u, new Uint8Array(s.options.applicationServerKey))\n                        ? (s.options.applicationServerKey.byteLength > 12\n                            ? r.info(\n                                \"Device was already subscribed to push using a different VAPID provider, creating new subscription.\",\n                              )\n                            : r.info(\n                                \"Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription.\",\n                              ),\n                          this.gn(s, e, u, i, t))\n                        : s.expirationTime &&\n                          new Date(s.expirationTime).valueOf() <=\n                            new Date().valueOf()\n                        ? (r.info(\n                            \"Push subscription is expired, creating new subscription.\",\n                          ),\n                          this.gn(s, e, u, i, t))\n                        : n && j(n)\n                        ? this.gn(s, e, u, i, t)\n                        : null == h\n                        ? (r.info(\n                            \"No push subscription creation date found, creating new subscription.\",\n                          ),\n                          this.gn(s, e, u, i, t))\n                        : h.valueOf() <= new Date().valueOf()\n                        ? (r.info(\n                            \"Push subscription older than 6 months, creating new subscription.\",\n                          ),\n                          this.gn(s, e, u, i, t))\n                        : (r.info(\n                            \"Device already subscribed to push, sending existing subscription to backend.\",\n                          ),\n                          this.wn(s, a, i));\n                    } else this.vn(e, u, i, t);\n                  })\n                  .catch((i) => {\n                    r.error(\"Error checking current push subscriptions: \" + i);\n                  });\n              })\n              .catch((i) => {\n                r.error(\"ServiceWorker registration failed: \" + i);\n              });\n        };\n      this.requestPermission(u, s, e);\n    } else if (this.bn) {\n      if (null == this.hn || \"\" === this.hn)\n        return (\n          r.error(\n            \"You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari\",\n          ),\n          void (\"function\" == typeof t && t(!0))\n        );\n      const e = window.safari.pushNotification.permission(this.hn);\n      this.jn(this.hn, e, i, t);\n    }\n  }\n  unsubscribe(i, t) {\n    if (!yt.isPushSupported())\n      return r.info(ea.Un), void (\"function\" == typeof t && t());\n    this.dn\n      ? navigator.serviceWorker.getRegistration(this.un).then((e) => {\n          e\n            ? e.pushManager\n                .getSubscription()\n                .then((s) => {\n                  s\n                    ? (this.Dn(),\n                      s\n                        .unsubscribe()\n                        .then((s) => {\n                          s\n                            ? (r.info(\n                                \"Device successfully unsubscribed from push.\",\n                              ),\n                              \"function\" == typeof i && i())\n                            : (r.error(\n                                \"Failed to unsubscribe device from push.\",\n                              ),\n                              \"function\" == typeof t && t()),\n                            this.Nn(e);\n                        })\n                        .catch((i) => {\n                          r.error(\"Push unsubscription error: \" + i),\n                            \"function\" == typeof t && t();\n                        }))\n                    : (r.info(\"Device already unsubscribed from push.\"),\n                      \"function\" == typeof i && i());\n                })\n                .catch((i) => {\n                  r.error(\"Error unsubscribing from push: \" + i),\n                    \"function\" == typeof t && t();\n                })\n            : (r.info(\"Device already unsubscribed from push.\"),\n              \"function\" == typeof i && i());\n        })\n      : this.bn &&\n        (this.Dn(),\n        r.info(\"Device unsubscribed from push.\"),\n        \"function\" == typeof i && i());\n  }\n}\nea.Un = \"Push notifications are not supported in this browser.\";\n","import e, { OPTIONS as L } from \"../managers/braze-instance.js\";\nimport ea from \"./push-manager.js\";\nconst na = {\n  t: !1,\n  i: null,\n  m: () => (\n    na.o(),\n    na.i ||\n      (na.i = new ea(\n        e.pr(),\n        e.ba(),\n        e.te(),\n        e.Hs(),\n        e.nn(L.wa),\n        e.nn(L.ya),\n        e.nn(L.Ma),\n        e.ir(),\n        e.nn(L._a),\n        e.nn(L.ka),\n        e.l(),\n      )),\n    na.i\n  ),\n  o: () => {\n    na.t || (e.g(na), (na.t = !0));\n  },\n  destroy: () => {\n    (na.i = null), (na.t = !1);\n  },\n};\nexport default na;\n","import e from \"../managers/braze-instance.js\";\nimport na from \"./push-manager-factory.js\";\nexport function unregisterPush(r, n) {\n  if (e.X()) return na.m().unsubscribe(r, n);\n}\n"],"names":["ei","Tn","t","r","n","atob","o","Uint8Array","_$t","isArray","j","isEqual","ii","ti","logger","EncodingUtils","STORAGE_KEYS","User","yt","getErrorMessage","si","ea","i","e","s","u","a","h","c","mn","gn","wn","_$e","_$i","Array","btoa","String","Dn","An","jn","window","Date","requestPermission","Notification","i1","vn","xn","navigator","Nn","subscribe","n1","isNaN","e1","unsubscribe","OPTIONS","L","na","unregisterPush"],"mappings":"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"}