{"version":3,"file":"597.js","sources":["webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flag.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flag-factory.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flags-provider.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/FeatureFlags/feature-flags-provider-factory.js","webpack://example-builtin-swc-loader/./node_modules/.pnpm/@braze+web-sdk@5.4.0/node_modules/@braze/web-sdk/src/FeatureFlags/refresh-feature-flags.js"],"sourcesContent":["import { logger as r } from \"../../shared-lib/index.js\";\nexport default class FeatureFlag {\n  constructor(t, e = !1, r = {}, i) {\n    (this.id = t),\n      (this.enabled = e),\n      (this.properties = r),\n      (this.trackingString = i),\n      (this.id = t),\n      (this.enabled = e),\n      (this.properties = r),\n      (this.trackingString = i);\n  }\n  he(t, e, r) {\n    const i = this.properties[t];\n    return null == i ? (this.ye(t), null) : e(i) ? i.value : (this.Pe(r), null);\n  }\n  getStringProperty(t) {\n    return this.he(t, this.be, \"string\");\n  }\n  getNumberProperty(t) {\n    return this.he(t, this.Ie, \"number\");\n  }\n  getBooleanProperty(t) {\n    return this.he(t, this.de, \"boolean\");\n  }\n  getImageProperty(t) {\n    return this.he(t, this.Te, \"image\");\n  }\n  getJsonProperty(t) {\n    return this.he(t, this.Ee, \"jsonobject\");\n  }\n  getTimestampProperty(t) {\n    return this.he(t, this.Ne, \"datetime\");\n  }\n  Y() {\n    const t = {};\n    return (\n      (t[FeatureFlag.tt.ht] = this.id),\n      (t[FeatureFlag.tt.le] = this.enabled),\n      (t[FeatureFlag.tt.pe] = this.properties),\n      (t[FeatureFlag.tt.Fe] = this.trackingString),\n      t\n    );\n  }\n  Pe(t) {\n    r.info(`Property is not of type ${t}.`);\n  }\n  ye(t) {\n    r.info(`${t} not found in feature flag properties.`);\n  }\n  be(t) {\n    return \"string\" === t.type && \"string\" == typeof t.value;\n  }\n  Ie(t) {\n    return \"number\" === t.type && \"number\" == typeof t.value;\n  }\n  de(t) {\n    return \"boolean\" === t.type && \"boolean\" == typeof t.value;\n  }\n  Te(t) {\n    return \"image\" === t.type && \"string\" == typeof t.value;\n  }\n  Ee(t) {\n    return (\n      \"jsonobject\" === t.type &&\n      \"object\" == typeof t.value &&\n      t.value.constructor == Object\n    );\n  }\n  Ne(t) {\n    return \"datetime\" === t.type && \"number\" == typeof t.value;\n  }\n}\n(FeatureFlag.tt = { ht: \"id\", le: \"e\", pe: \"pr\", Fe: \"fts\" }),\n  (FeatureFlag.Rt = { ht: \"id\", le: \"enabled\", pe: \"properties\", Fe: \"fts\" });\n","import { logger as r } from \"../../shared-lib/index.js\";\nimport FeatureFlag from \"./feature-flag.js\";\nexport function newFeatureFlagFromJson(e) {\n  if (e[FeatureFlag.Rt.ht] && \"boolean\" == typeof e[FeatureFlag.Rt.le])\n    return new FeatureFlag(\n      e[FeatureFlag.Rt.ht],\n      e[FeatureFlag.Rt.le],\n      e[FeatureFlag.Rt.pe],\n      e[FeatureFlag.Rt.Fe],\n    );\n  r.info(`Unable to create feature flag from ${JSON.stringify(e, null, 2)}`);\n}\nexport function newFeatureFlagFromSerializedValue(e) {\n  if (e[FeatureFlag.tt.ht] && \"boolean\" == typeof e[FeatureFlag.tt.le])\n    return new FeatureFlag(\n      e[FeatureFlag.tt.ht],\n      e[FeatureFlag.tt.le],\n      e[FeatureFlag.tt.pe],\n      e[FeatureFlag.tt.Fe],\n    );\n  r.info(\n    `Unable to deserialize feature flag from ${JSON.stringify(e, null, 2)}`,\n  );\n}\n","import { logger as r } from \"../../shared-lib/index.js\";\nimport y from \"../common/base-provider.js\";\nimport e from \"../managers/braze-instance.js\";\nimport { STORAGE_KEYS as o } from \"../managers/storage-manager.js\";\nimport T from \"../managers/subscription-manager.js\";\nimport { randomInclusive as U } from \"../util/math.js\";\nimport C from \"../util/net.js\";\nimport {\n  newFeatureFlagFromJson as st,\n  newFeatureFlagFromSerializedValue as it,\n} from \"./feature-flag-factory.js\";\nimport D from \"../util/request-header-utils.js\";\nexport default class er extends y {\n  constructor(t, s, i, r) {\n    super(),\n      (this.yt = t),\n      (this.qt = s),\n      (this.u = i),\n      (this.ri = r),\n      (this.hi = []),\n      (this.oi = 0),\n      (this.yt = t),\n      (this.qt = s),\n      (this.u = i),\n      (this.ri = r),\n      (this.ai = null),\n      (this.ni = new T()),\n      (this.li = 10),\n      (this.ui = null),\n      (this.fi = null),\n      e.$t(this.ni);\n  }\n  Ns(t) {\n    var s;\n    if (\n      (null === (s = this.yt) || void 0 === s ? void 0 : s.ci()) &&\n      null != t &&\n      t.feature_flags\n    ) {\n      this.hi = [];\n      for (const s of t.feature_flags) {\n        const t = st(s);\n        t && this.hi.push(t);\n      }\n      (this.oi = new Date().getTime()), this.di(), this.ni.Dt(this.hi);\n    }\n  }\n  mi() {\n    let t = {};\n    this.u && (t = this.u.j(o.C.gi));\n    const s = {};\n    for (const i in t) {\n      const e = it(t[i]);\n      e && (s[e.id] = e);\n    }\n    return s;\n  }\n  Fi() {\n    var t;\n    return (null === (t = this.u) || void 0 === t ? void 0 : t.j(o.C.vi)) || {};\n  }\n  pi(t) {\n    this.u && this.u.k(o.C.vi, t);\n  }\n  Zs(t) {\n    return this.ni.It(t);\n  }\n  refreshFeatureFlags(t, s, i = !1, e = !0) {\n    const r = () => {\n      \"function\" == typeof s && s(), this.ni.Dt(this.hi);\n    };\n    if (!this.wi(i))\n      return (\n        !this.ai &&\n          this.yt &&\n          (this.ai = this.yt.ji(() => {\n            this.refreshFeatureFlags(t, s);\n          })),\n        void r()\n      );\n    const h = this.qt;\n    if (!h) return void r();\n    e && this.yi();\n    const o = h.Js({}, !0),\n      a = h.$s(o, D.Ps.bi);\n    let n = !1;\n    h.Xs(\n      o,\n      (h = -1) => {\n        if (!this.qt) return void r();\n        const l = new Date().valueOf();\n        D._s(this.u, D.Ps.bi, l),\n          -1 !== h && a.push([\"X-Braze-Req-Tokens-Remaining\", h.toString()]),\n          C.Gs({\n            url: `${this.qt.Hs()}/feature_flags/sync`,\n            headers: a,\n            data: o,\n            L: (s) => {\n              if (!this.qt.Ks(o, s, a)) return (n = !0), void r();\n              this.qt.Os(),\n                this.Ns(s),\n                (n = !1),\n                D.Qs(this.u, D.Ps.bi, 1),\n                \"function\" == typeof t && t();\n            },\n            error: (t) => {\n              this.qt.Vs(t, \"retrieving feature flags\"), (n = !0), r();\n            },\n            Ws: () => {\n              if (e && n && !this.fi) {\n                D.Ys(this.u, D.Ps.bi);\n                let e = this.ui;\n                (null == e || e < 1e3 * this.li) && (e = 1e3 * this.li),\n                  this.Ci(Math.min(3e5, U(1e3 * this.li, 3 * e)), t, s, i);\n              }\n            },\n          });\n      },\n      D.Ps.bi,\n      s,\n    );\n  }\n  yi() {\n    null != this.fi && (clearTimeout(this.fi), (this.fi = null));\n  }\n  Ci(t = 1e3 * this.li, s, i, e = !1) {\n    this.yi(),\n      (this.fi = window.setTimeout(() => {\n        this.refreshFeatureFlags(s, i, e);\n      }, t)),\n      (this.ui = t);\n  }\n  wi(t) {\n    if (!this.yt) return !1;\n    if (!t) {\n      const t = this.yt.Ri();\n      if (null == t) return !1;\n      let s = !1;\n      if (!isNaN(t)) {\n        if (-1 === t) return r.info(\"Feature flag refreshes not allowed\"), !1;\n        s = new Date().getTime() >= (this.oi || 0) + 1e3 * t;\n      }\n      if (!s)\n        return (\n          r.info(`Feature flag refreshes were rate limited to ${t} seconds`), !1\n        );\n    }\n    return this.yt.ci();\n  }\n  Ti() {\n    var t;\n    return (\n      (null === (t = this.u) || void 0 === t ? void 0 : t.j(o.C.Di)) || null\n    );\n  }\n  Ii() {\n    var t, s;\n    null === (t = this.u) ||\n      void 0 === t ||\n      t.k(o.C.Di, null === (s = this.ri) || void 0 === s ? void 0 : s.Si());\n  }\n  qi() {\n    var t;\n    const s = null === (t = this.ri) || void 0 === t ? void 0 : t.Si(),\n      i = this.Ti();\n    return null == i || s === i;\n  }\n  di() {\n    if (!this.u) return;\n    const t = {};\n    for (const s of this.hi) {\n      const i = s.Y();\n      t[s.id] = i;\n    }\n    this.u.k(o.C.gi, t), this.u.k(o.C.xi, this.oi), this.Ii();\n  }\n}\n","import e from \"../managers/braze-instance.js\";\nimport er from \"./feature-flags-provider.js\";\nconst ir = {\n  t: !1,\n  provider: null,\n  rr: () => (\n    ir.o(),\n    ir.provider ||\n      ((ir.provider = new er(e.ir(), e.nr(), e.l(), e.zr())),\n      e.ar(ir.provider)),\n    ir.provider\n  ),\n  o: () => {\n    ir.t || (e.g(ir), (ir.t = !0));\n  },\n  destroy: () => {\n    (ir.provider = null), (ir.t = !1);\n  },\n};\nexport default ir;\n","import e from \"../managers/braze-instance.js\";\nimport ir from \"./feature-flags-provider-factory.js\";\nfunction tr(r, t, a = !1) {\n  if (e.X()) return ir.rr().refreshFeatureFlags(r, t, a);\n}\nexport function refreshFeatureFlags(r, e) {\n  tr(r, e);\n}\nexport default tr;\n"],"names":["logger","r","FeatureFlag","t","e","i","he","getStringProperty","getNumberProperty","getBooleanProperty","getImageProperty","getJsonProperty","getTimestampProperty","Y","Pe","ye","be","Ie","de","Te","Ee","_type_of","Object","Ne","newFeatureFlagFromJson","JSON","newFeatureFlagFromSerializedValue","y","STORAGE_KEYS","o","T","randomInclusive","U","C","st","it","D","er","s","Ns","_iteratorError","s1","_$t","Date","mi","Fi","pi","Zs","refreshFeatureFlags","h","a","n","l","e1","Math","yi","clearTimeout","Ci","window","wi","isNaN","Ti","Ii","qi","di","ir","tr"],"mappings":"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"}